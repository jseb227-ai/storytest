import{defineProperty as e}from"../../../../_virtual/_rollupPluginBabelHelpers.js";import{__rest as t}from"../../../../_virtual/_tslib.js";import r,{forwardRef as n,useCallback as o,useEffect as i,useMemo as l}from"react";import a from"../TableBody/TableBody.js";import s from"./TableVirtualizedBody.module.scss.js";import{FixedSizeList as c}from"react-window";import{useTable as d}from"../context/TableContext/TableContext.js";import m from"classnames";import{getTestId as u}from"../../../tests/testIds.js";import{ComponentDefaultTestId as f}from"../../../tests/constants.js";import{RowHeights as v}from"../Table/TableConsts.js";import p from"react-virtualized-auto-sizer";import{useTableRowMenu as b}from"../context/TableRowMenuContext/TableRowMenuContext.js";var T=r.memo((function(e){var n,o=e.style,i=(0,e.rowRenderer)(e.item),l=t(o,["width"]);return r.cloneElement(i,{style:Object.assign(Object.assign({},l),null===(n=i.props)||void 0===n?void 0:n.style)})})),h=n((function(h,E){var g=h.items,w=h.rowRenderer,y=h.onScroll,j=h.columns,R=h.headerRenderer,B=h.id,L=h.className,x=h["data-testid"],z=h.overscanCount,C=void 0===z?1:z,_=d(),I=_.size,O=_.virtualizedListRef,A=_.onVirtualizedListScroll,D=_.markTableAsVirtualized,S=_.dataState,V=b().resetHoveredRow,H=!!j&&!!R,N=(S||{}).isLoading,U=o((function(e){var t=e.target;V(),A({target:t,currentTarget:t})}),[V,A]);i((function(){var e=O.current;if(e)return e.addEventListener("scroll",U),function(){e.removeEventListener("scroll",U)}}),[U,O]);var M=o((function(e){H||null==y||y(e.scrollDirection,e.scrollOffset,e.scrollUpdateWasRequested)}),[y,H]),P=o((function(e){var t=e.index;return H&&0===t?null:r.createElement(T,{item:g[H?t-1:t],rowRenderer:w,style:e.style})}),[g,w,H]);i((function(){H||D()}),[D,H]);var Y=l((function(){return H?n((function(e,n){var o=e.children,i=t(e,["children"]);return r.createElement("div",Object.assign({ref:n},i),R(j),o)})):void 0}),[H,R,j]);return N&&H?r.createElement("div",{ref:E,id:B,className:m(s.tableBody,s.withHeader,L),"data-testid":x||u(f.TABLE_VIRTUALIZED_BODY,B)},R(j),r.createElement(a,null)):r.createElement(a,{className:m(s.tableBody,e({},s.withHeader,H),L),id:B,"data-testid":x||u(f.TABLE_VIRTUALIZED_BODY,B),ref:E},(null==g?void 0:g.length)&&r.createElement(p,null,(function(e){return r.createElement(c,{className:s.tableBodyItems,itemSize:v[I],height:e.height,itemCount:H?g.length+1:g.length,width:e.width,overscanCount:C,onScroll:M,outerRef:function(e){O.current=e},innerElementType:Y},P)})))}));export{h as default};
//# sourceMappingURL=TableVirtualizedBody.js.map

{"version":3,"file":"DropdownComboboxController.js","sources":["../../../../../src/components/DropdownNew/modes/DropdownComboboxController.tsx"],"sourcesContent":["import React, { useState } from \"react\";\nimport { type DropdownSingleControllerProps } from \"../Dropdown.types\";\nimport useDropdownCombobox from \"../hooks/useDropdownCombobox\";\nimport { type BaseListItemData } from \"../../BaseListItem\";\nimport { type DropdownContextProps } from \"../context/DropdownContext.types\";\nimport DropdownWrapperUI from \"../components/DropdownWrapperUI\";\n\nconst DropdownComboboxController = <Item extends BaseListItemData<Record<string, unknown>>>(\n  props: DropdownSingleControllerProps<Item>\n) => {\n  const {\n    options,\n    isMenuOpen: isMenuOpenProp,\n    autoFocus,\n    closeMenuOnSelect = true,\n    defaultValue,\n    value,\n    inputValue: inputValueProp,\n    onChange,\n    onInputChange,\n    onMenuClose,\n    onMenuOpen,\n    onOptionSelect,\n    filterOption,\n    showSelectedOptions = true,\n    clearable = true,\n    searchable = true,\n    multi = false,\n    dropdownRef,\n    onFocus,\n    onBlur,\n    onKeyDown,\n    onClear,\n    loading = false,\n\n    size = \"medium\",\n    readOnly,\n    disabled\n  } = props;\n\n  const [isFocused, setIsFocused] = useState(false);\n\n  const handleOptionSelect = (item: Item | null) => {\n    onOptionSelect?.(item);\n    if (item) {\n      setIsFocused(false);\n    }\n  };\n\n  const {\n    isOpen,\n    inputValue: hookInputValue,\n    highlightedIndex,\n    getToggleButtonProps,\n    getLabelProps,\n    getMenuProps,\n    getItemProps,\n    getInputProps: hookGetInputProps,\n    reset: hookReset,\n    filteredOptions,\n    selectedItem: hookSelectedItem,\n    toggleMenu\n  } = useDropdownCombobox<Item>(\n    options,\n    isMenuOpenProp,\n    autoFocus,\n    closeMenuOnSelect,\n    defaultValue,\n    value,\n    inputValueProp,\n    onChange,\n    onInputChange,\n    onMenuClose,\n    onMenuOpen,\n    handleOptionSelect,\n    filterOption,\n    showSelectedOptions\n  );\n\n  const contextValue: DropdownContextProps<Item> = {\n    ...props,\n    isOpen,\n    inputValue: hookInputValue ?? null,\n    highlightedIndex,\n    selectedItem: hookSelectedItem,\n    selectedItems: [],\n    filteredOptions,\n    getToggleButtonProps,\n    getLabelProps,\n    getMenuProps,\n    getItemProps,\n    getInputProps: (inputOptions?: any) => {\n      return hookGetInputProps!({\n        ...(inputOptions || {}),\n        disabled: readOnly || disabled,\n        onFocus: (event: React.FocusEvent<HTMLInputElement>) => {\n          setIsFocused(true);\n          onFocus?.(event as any);\n          inputOptions?.onFocus?.(event);\n        },\n        onBlur: (event: React.FocusEvent<HTMLInputElement>) => {\n          setIsFocused(false);\n          onBlur?.(event);\n          inputOptions?.onBlur?.(event);\n        },\n        onKeyDown: (event: React.KeyboardEvent<HTMLInputElement>) => {\n          onKeyDown?.(event);\n          inputOptions?.onKeyDown?.(event);\n        }\n      });\n    },\n    reset: hookReset,\n    contextOnClear: () => {\n      hookReset();\n      onClear?.();\n    },\n    contextOnOptionRemove: () => {},\n    addSelectedItem: undefined,\n    removeSelectedItem: undefined,\n    isFocused,\n    clearable,\n    searchable,\n    multi,\n    closeMenuOnSelect,\n    size,\n    toggleMenu,\n    loading\n  };\n  return <DropdownWrapperUI contextValue={contextValue} dropdownRef={dropdownRef} />;\n};\n\nexport default DropdownComboboxController;\n"],"names":["DropdownComboboxController","props","options","isMenuOpenProp","isMenuOpen","autoFocus","_props$closeMenuOnSel","closeMenuOnSelect","defaultValue","value","inputValueProp","inputValue","onChange","onInputChange","onMenuClose","onMenuOpen","onOptionSelect","filterOption","_props$showSelectedOp","showSelectedOptions","_props$clearable","clearable","_props$searchable","searchable","_props$multi","multi","dropdownRef","onFocus","onBlur","onKeyDown","onClear","_props$loading","loading","_props$size","size","readOnly","disabled","_useState","useState","_useState2","_slicedToArray","isFocused","setIsFocused","_useDropdownCombobox","useDropdownCombobox","item","isOpen","hookInputValue","highlightedIndex","getToggleButtonProps","getLabelProps","getMenuProps","getItemProps","hookGetInputProps","getInputProps","hookReset","reset","filteredOptions","hookSelectedItem","selectedItem","toggleMenu","contextValue","Object","assign","selectedItems","inputOptions","event","_a","call","contextOnClear","contextOnOptionRemove","addSelectedItem","undefined","removeSelectedItem","React","createElement","DropdownWrapperUI"],"mappings":"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"}
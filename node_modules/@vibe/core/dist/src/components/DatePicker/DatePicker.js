import{slicedToArray as e,defineProperty as t}from"../../../_virtual/_rollupPluginBabelHelpers.js";import a,{forwardRef as n,useState as r,useCallback as i}from"react";import o from"classnames";import s from"moment";import"react-dates/initialize.js";import{DayPickerRangeController as d,DayPickerSingleDateController as l}from"react-dates";import{DayPickerPhrases as c}from"react-dates/lib/defaultPhrases.js";import m from"./DatePickerHeader/DatePickerHeader.js";import u from"./DateNavigationItem/DateNavigationItem.js";import f from"./YearPicker/YearPicker.js";import{WEEK_FIRST_DAY as D,DAY_SIZE as v}from"./constants.js";import{FocusInput as h,Direction as p}from"./types.js";import{getTestId as E}from"../../tests/testIds.js";import{ComponentDefaultTestId as k,ComponentVibeId as y}from"../../tests/constants.js";import{NOOP as g}from"../../utils/function-utils.js";import b from"./DatePicker.module.scss.js";import"./external_datepicker.scss.js";var P=n((function(n,P){var j=n.id,O=n.className,N=n.firstDayOfWeek,C=void 0===N?D:N,M=n.daySize,I=void 0===M?v:M,S=n.range,Y=void 0!==S&&S,K=n.shouldBlockDay,R=n.shouldBlockYear,W=n.numberOfMonths,A=void 0===W?1:W,B=n.hideNavigationKeys,T=void 0!==B&&B,_=n.date,x=n.endDate,z=n.onPickDate,H=void 0===z?g:z,F=n.enableOutsideDays,w=void 0!==F&&F,V=n.showWeekNumber,L=void 0!==V&&V,q=n.shouldBlockRange,G=n["data-testid"],J=n.phrases,Q=r(h.startDate),U=e(Q,2),X=U[0],Z=U[1],$=r(!1),ee=e($,2),te=ee[0],ae=ee[1],ne=r(null),re=e(ne,2),ie=re[0],oe=re[1],se=r(null),de=e(se,2),le=de[0],ce=de[1],me=i((function(e){var t=e.month,n=e.onYearSelect;return!le&&n&&ce((function(){return n})),a.createElement(m,{"data-testid":G||E(k.DATEPICKER_HEADER,j),currentDate:t||s(),isMonthYearSelection:te,onToggleMonthYearPicker:function(){return ae((function(e){return!e}))},hideNavigationKeys:T})}),[te,G,j,T,le]),ue=i((function(e){var t=0===C?e.clone().add(1,"d").isoWeek():e.isoWeek();return a.createElement(a.Fragment,null,a.createElement("span",{className:b.calendarDayWeekNumber},t)," ",e.format("D"))}),[C]),fe=i((function(e){var t=ie||_;oe(e),ae(!1),le(t,s(e).year())}),[ie,_,le]),De=i((function(){return a.createElement(f,{"data-testid":G||E(k.DATEPICKER_YEAR_SELECTION,j),selectedDate:_,isYearBlocked:R,changeCurrentDate:fe})}),[G,j,ie,_,R,fe]),ve=i((function(e){H&&H(X===h.startDate?Object.assign(Object.assign({},e),{endDate:null}):e)}),[X,H]),he=i((function(e){Z(e||h.startDate)}),[]),pe=Object.assign(Object.assign({},c),J),Ee=!T&&!te;return a.createElement("div",{"data-testid":G||E(k.DATEPICKER,j),ref:P,id:j,className:o(b.datepickerContainer,O,t(t(t({},b.withWeekNumber,L),b.rangePickerMode,Y),b.monthYearSelection,te)),"data-vibe":y.DATE_PICKER},Y?a.createElement(d,{phrases:pe,renderDayContents:L?ue:void 0,firstDayOfWeek:C,hideKeyboardShortcutsPanel:!0,startDate:_,endDate:x,onDatesChange:ve,focusedInput:X,minimumNights:0,onFocusChange:he,navPrev:Ee?a.createElement(u,{kind:p.prev}):a.createElement("div",null),navNext:Ee?a.createElement(u,{kind:p.next}):a.createElement("div",null),daySize:I,isOutsideRange:q,isDayBlocked:K,renderMonthElement:me,enableOutsideDays:w||L,numberOfMonths:A,initialVisibleMonth:function(){return ie||_||s()}}):a.createElement(l,{phrases:pe,renderDayContents:L?ue:void 0,firstDayOfWeek:C,hideKeyboardShortcutsPanel:!0,onFocusChange:g,numberOfMonths:A,date:_,onDateChange:function(e){return H(e)},navPrev:Ee?a.createElement(u,{kind:p.prev}):a.createElement("div",null),navNext:Ee?a.createElement(u,{kind:p.next}):a.createElement("div",null),focused:!0,renderMonthElement:me,enableOutsideDays:w||L,daySize:I,isDayBlocked:K,initialVisibleMonth:function(){return ie||_||s()}}),te&&De())}));export{P as default};
//# sourceMappingURL=DatePicker.js.map

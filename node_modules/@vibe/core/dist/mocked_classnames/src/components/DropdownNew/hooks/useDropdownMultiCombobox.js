import{toConsumableArray as e}from"../../../../_virtual/_rollupPluginBabelHelpers.js";import{useMemo as t}from"react";import n from"./useDropdownFiltering.js";import{useMultipleSelection as o,useCombobox as s}from"downshift";function i(i,l,r,u,a,p,c,g,d,m,I,f,v,h,P){var O=void 0!==c?c:l,b=n(i,h,P,O),S=b.filteredOptions,C=b.filterOptions,M=t((function(){return S.flatMap((function(e){return e.options}))}),[S]),V=o({selectedItems:O,initialSelectedItems:p,onSelectedItemsChange:function(e){var t=e.selectedItems;void 0===c&&r(t||[]),null==d||d(t||[])}}),j=V.getSelectedItemProps,w=V.getDropdownProps,y=V.addSelectedItem,T=V.removeSelectedItem,D=s({items:M,itemToString:function(e){var t;return null!==(t=null==e?void 0:e.label)&&void 0!==t?t:""},isItemDisabled:function(e){return!!e.disabled},isOpen:u,initialIsOpen:a,initialInputValue:g||"",onIsOpenChange:function(e){e.isOpen?null==f||f():null==I||I()},onInputValueChange:function(e){var t=e.inputValue;C(t||""),null==m||m(t||"")},onSelectedItemChange:function(t){var n=t.selectedItem;if(n){var o=O.findIndex((function(e){return e.value===n.value}));if(o>-1){var s=[].concat(e(O.slice(0,o)),e(O.slice(o+1)));void 0===c&&r(s),T(n)}else{var i=[].concat(e(O),[n]);void 0===c&&r(i),y(n)}null==v||v(n),C("")}},stateReducer:function(e,t){switch(t.type){case s.stateChangeTypes.InputKeyDownEnter:case s.stateChangeTypes.ItemClick:return Object.assign(Object.assign({},t.changes),{inputValue:"",isOpen:!0});case s.stateChangeTypes.InputBlur:return Object.assign(Object.assign({},t.changes),{inputValue:""});default:return t.changes}}});return{isOpen:D.isOpen,inputValue:D.inputValue,highlightedIndex:D.highlightedIndex,selectedItems:O,getSelectedItemProps:j,getDropdownProps:w,addSelectedItem:y,getToggleButtonProps:D.getToggleButtonProps,getLabelProps:D.getLabelProps,getMenuProps:D.getMenuProps,getInputProps:D.getInputProps,getItemProps:D.getItemProps,reset:D.reset,removeSelectedItem:T,filteredOptions:S,openMenu:D.openMenu,toggleMenu:D.toggleMenu,closeMenu:D.closeMenu}}export{i as default};
//# sourceMappingURL=useDropdownMultiCombobox.js.map

import{slicedToArray as n}from"../../../../_virtual/_rollupPluginBabelHelpers.js";import{useState as a,useEffect as l,useCallback as r}from"react";import{calculateSteppedValue as i}from"../utils/calcValue.js";var e=function(e){var t=e.value,o=e.onChange,u=e.min,v=e.max,d=e.step,f=void 0===d?1:d,s=e.disabled,m=e.readOnly,p=e.allowOutOfBounds,c=e.onValidityChange,h=a(null===t?"":t+""),g=n(h,2),w=g[0],y=g[1];l((function(){var n=null===t?"":t+"";y((function(a){return t!==parseFloat(a)?n:a}))}),[t]);var x=r((function(n){var a=n.target.value;if(""===a)return y(""),void o(null,n);if(/^-?\d*\.?\d*$/.test(a)){y(a);var l="-"===a||a.endsWith(".");if(l&&1===a.length&&a.endsWith("."))o(0,n);else if(!l){var r=parseFloat(a);if(p)return void(r!==t&&o(r,n));var i=Math.max(null!=u?u:-1/0,Math.min(null!=v?v:1/0,r));i!==t&&o(i,n)}}}),[o,p,u,v,t]);l((function(){c&&c(null===t||!(void 0!==u&&u>t||void 0!==v&&t>v))}),[t,u,v,c]);var A=r((function(n){if(!s&&!m){var a="ArrowUp"===n.key;if(a||"ArrowDown"===n.key){n.preventDefault();var l=i({value:t,direction:a?1:-1,step:f,min:u,max:v,allowOutOfBounds:p});o(l,n)}}}),[t,f,u,v,o,s,m,p]);return{inputValue:w,numericValue:t,onChange:x,onKeyDown:A,isAtMin:!p&&null!==t&&void 0!==u&&u>=t,isAtMax:!p&&null!==t&&void 0!==v&&t>=v}};export{e as default};
//# sourceMappingURL=useNumberFieldState.js.map

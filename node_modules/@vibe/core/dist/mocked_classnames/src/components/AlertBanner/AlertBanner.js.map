{"version":3,"file":"AlertBanner.js","sources":["../../../../../src/components/AlertBanner/AlertBanner.tsx"],"sourcesContent":["import { getStyle } from \"../../helpers/typesciptCssModulesHelper\";\nimport cx from \"classnames\";\nimport React, { type ForwardedRef, forwardRef, type ReactElement, useMemo } from \"react\";\nimport IconButton from \"../../components/IconButton/IconButton\";\nimport { CloseSmall } from \"@vibe/icons\";\nimport { AlertBannerBackgroundColor as AlertBannerBackgroundColorEnum } from \"./AlertBannerConstants\";\nimport { type AlertBannerBackgroundColor } from \"./AlertBanner.types\";\nimport { NOOP } from \"../../utils/function-utils\";\nimport { type AlertBannerLinkProps } from \"./AlertBannerLink/AlertBannerLink\";\nimport { type AlertBannerButtonProps } from \"./AlertBannerButton/AlertBannerButton\";\nimport { type AlertBannerTextProps } from \"./AlertBannerText/AlertBannerText\";\nimport { ComponentDefaultTestId, ComponentVibeId } from \"../../tests/constants\";\nimport { getTestId } from \"../../tests/test-ids-utils\";\nimport { type VibeComponentProps, withStaticProps } from \"../../types\";\nimport styles from \"./AlertBanner.module.scss\";\nimport Text from \"../Text/Text\";\nimport { AlertBannerContext } from \"./AlertBannerContext\";\n\ntype ChildrenType = ReactElement<AlertBannerButtonProps | AlertBannerLinkProps | AlertBannerTextProps>;\n\nexport interface AlertBannerProps extends VibeComponentProps {\n  /**\n   * The background color of the alert banner.\n   */\n  backgroundColor?: AlertBannerBackgroundColor;\n  /**\n   * If true, the close button is hidden.\n   */\n  isCloseHidden?: boolean;\n  /**\n   * The ARIA label of the alert banner for accessibility.\n   */\n  ariaLabel?: string;\n  /**\n   * The ARIA label of the close button for accessibility.\n   */\n  closeButtonAriaLabel?: string;\n  /**\n   * Callback fired when the close button is clicked.\n   */\n  onClose?: (event: React.MouseEvent<HTMLButtonElement>) => void;\n  /**\n   * The content of the alert banner.\n   */\n  children?: ChildrenType | ChildrenType[];\n}\n\nconst AlertBanner = forwardRef(\n  (\n    {\n      children: originalChildren,\n      className,\n      backgroundColor = \"primary\",\n      onClose = NOOP,\n      ariaLabel = \"\",\n      closeButtonAriaLabel = \"Close\",\n      isCloseHidden = false,\n      id,\n      \"data-testid\": dataTestId\n    }: AlertBannerProps,\n    ref: ForwardedRef<HTMLDivElement>\n  ) => {\n    const classNames = useMemo(() => {\n      return cx(className, styles.alertBanner, getStyle(styles, backgroundColor));\n    }, [className, backgroundColor]);\n\n    const isDarkBackground = backgroundColor === \"dark\";\n    const isFixedColor = backgroundColor === \"warning\";\n    const textColor = useMemo(() => {\n      if (isFixedColor) {\n        return \"fixedDark\";\n      }\n      return isDarkBackground ? \"onInverted\" : \"onPrimary\";\n    }, [isDarkBackground, isFixedColor]);\n    const children = useMemo(() => {\n      const allChildren = React.Children.toArray(originalChildren) as ReactElement[];\n      const filteredChildren = allChildren.filter(\n        (\n          child: ReactElement & {\n            type: Record<string, unknown>;\n          }\n        ) => {\n          if (child.type.isAlertBannerItem || child.type.displayName === \"MDXCreateElement\") return true;\n          console.error(\n            \"Alert banner child is not supported. Please use AlertBannerText, AlertBannerLink or AlertBannerButton.\",\n            child\n          );\n          return false;\n        }\n      );\n\n      return filteredChildren.map((child, index) => {\n        return React.cloneElement(child, {\n          ...child?.props,\n          marginLeft: index > 0,\n          isDarkBackground\n        });\n      });\n    }, [originalChildren, isDarkBackground]);\n\n    return (\n      <Text\n        type=\"text2\"\n        color={textColor}\n        ref={ref}\n        className={classNames}\n        role=\"banner\"\n        aria-label={ariaLabel || \"banner\"}\n        id={id}\n        data-testid={dataTestId || getTestId(ComponentDefaultTestId.ALERT_BANNER, id)}\n        data-vibe={ComponentVibeId.ALERT_BANNER}\n      >\n        <AlertBannerContext.Provider value={{ textColor }}>\n          <div className={cx(styles.content)}>\n            {children.map(\n              (\n                child: ReactElement & {\n                  type: Record<string, unknown>;\n                },\n                index\n              ) => {\n                const childTypeIsAlertBannerText = child.type.isAlertBannerText;\n                return (\n                  <div\n                    key={index}\n                    className={cx(styles.contentItem, {\n                      [styles.contentItemText]: childTypeIsAlertBannerText\n                    })}\n                  >\n                    {childTypeIsAlertBannerText ? <div className={cx(styles.ellipsis)}>{child}</div> : child}\n                  </div>\n                );\n              }\n            )}\n          </div>\n        </AlertBannerContext.Provider>\n        <div className={cx(styles.closeButtonWrapper)}>\n          {isCloseHidden ? null : (\n            <IconButton\n              data-testid=\"alert-banner-close-button\"\n              icon={CloseSmall}\n              className={cx(styles.closeBtn)}\n              hideTooltip\n              onClick={onClose}\n              size=\"small\"\n              kind=\"tertiary\"\n              color={isDarkBackground ? \"on-inverted-background\" : \"on-primary-color\"}\n              ariaLabel={closeButtonAriaLabel}\n            />\n          )}\n        </div>\n      </Text>\n    );\n  }\n);\n\ninterface AlertBannerStaticProps {\n  backgroundColors: typeof AlertBannerBackgroundColorEnum;\n}\n\nexport default withStaticProps<AlertBannerProps, AlertBannerStaticProps>(AlertBanner, {\n  backgroundColors: AlertBannerBackgroundColorEnum\n});\n"],"names":["withStaticProps","forwardRef","_ref","ref","originalChildren","children","className","_ref$backgroundColor","backgroundColor","_ref$onClose","onClose","NOOP","_ref$ariaLabel","ariaLabel","_ref$closeButtonAriaL","closeButtonAriaLabel","_ref$isCloseHidden","isCloseHidden","id","dataTestId","classNames","useMemo","cx","styles","alertBanner","getStyle","isDarkBackground","isFixedColor","textColor","React","Children","toArray","filter","child","type","isAlertBannerItem","displayName","console","error","map","index","cloneElement","Object","assign","props","marginLeft","Text","color","role","getTestId","ComponentDefaultTestId","ALERT_BANNER","ComponentVibeId","createElement","AlertBannerContext","Provider","value","content","childTypeIsAlertBannerText","isAlertBannerText","key","contentItem","_defineProperty","contentItemText","ellipsis","closeButtonWrapper","IconButton","icon","CloseSmall","closeBtn","hideTooltip","onClick","size","kind","backgroundColors","AlertBannerBackgroundColorEnum"],"mappings":"2zBA+CA,IAiHeA,EAAAA,EAjHKC,GAClB,SAAAC,EAYEC,GACE,IAXUC,EAAgBF,EAA1BG,SACAC,EAASJ,EAATI,UAASC,EAAAL,EACTM,gBAAAA,OAAkB,IAAHD,EAAG,UAASA,EAAAE,EAAAP,EAC3BQ,QAAAA,OAAUC,IAAHF,EAAGE,EAAIF,EAAAG,EAAAV,EACdW,UAAAA,OAAY,IAAHD,EAAG,GAAEA,EAAAE,EAAAZ,EACda,qBAAAA,OAAuB,IAAHD,EAAG,QAAOA,EAAAE,EAAAd,EAC9Be,cAAAA,OAAgB,IAAHD,GAAQA,EACrBE,EAAEhB,EAAFgB,GACeC,EAAUjB,EAAzB,eAIIkB,EAAaC,GAAQ,WACzB,OAAOC,EAAGhB,EAAWiB,EAAOC,YAAaC,EAASF,EAAQf,GAC5D,GAAG,CAACF,EAAWE,IAETkB,EAAuC,SAApBlB,EACnBmB,EAAmC,YAApBnB,EACfoB,EAAYP,GAAQ,WACxB,OAAIM,EACK,YAEFD,EAAmB,aAAe,WAC3C,GAAG,CAACA,EAAkBC,IAChBtB,EAAWgB,GAAQ,WAiBvB,OAhBoBQ,EAAMC,SAASC,QAAQ3B,GACN4B,QACnC,SACEC,GAIA,SAAIA,EAAMC,KAAKC,mBAAgD,qBAA3BF,EAAMC,KAAKE,eAC/CC,QAAQC,MACN,yGACAL,IAEK,EACT,IAGsBM,KAAI,SAACN,EAAOO,GAClC,OAAOX,EAAMY,aAAaR,EACrBS,OAAAC,OAAAD,OAAAC,OAAA,CAAA,EAAAV,aAAA,EAAAA,EAAOW,OAAK,CACfC,WAAYL,EAAQ,EACpBd,iBAAAA,IAEJ,GACF,GAAG,CAACtB,EAAkBsB,IAEtB,OACEG,gBAACiB,EAAI,CACHZ,KAAK,QACLa,MAAOnB,EACPzB,IAAKA,EACLG,UAAWc,EACX4B,KAAK,SACO,aAAAnC,GAAa,SACzBK,GAAIA,gBACSC,GAAc8B,EAAUC,EAAuBC,aAAcjC,GAAG,YAClEkC,EAAgBD,cAE3BtB,EAACwB,cAAAC,EAAmBC,SAAQ,CAACC,MAAO,CAAE5B,UAAAA,IACpCC,EAAAwB,cAAA,MAAA,CAAK/C,UAAWgB,EAAGC,EAAOkC,UACvBpD,EAASkC,KACR,SACEN,EAGAO,GAEA,IAAMkB,EAA6BzB,EAAMC,KAAKyB,kBAC9C,OACE9B,EAAAwB,cAAA,MAAA,CACEO,IAAKpB,EACLlC,UAAWgB,EAAGC,EAAOsC,YAAWC,EAAA,CAAA,EAC7BvC,EAAOwC,gBAAkBL,KAG3BA,EAA6B7B,EAAKwB,cAAA,MAAA,CAAA/C,UAAWgB,EAAGC,EAAOyC,WAAY/B,GAAeA,EAGxF,MAIPJ,EAAAwB,cAAA,MAAA,CAAK/C,UAAWgB,EAAGC,EAAO0C,qBACvBhD,EAAgB,KACfY,EAACwB,cAAAa,EACa,CAAA,cAAA,4BACZC,KAAMC,EACN9D,UAAWgB,EAAGC,EAAO8C,UACrBC,aACA,EAAAC,QAAS7D,EACT8D,KAAK,QACLC,KAAK,WACL1B,MAAOrB,EAAmB,yBAA2B,mBACrDb,UAAWE,KAMvB,IAOoF,CACpF2D,iBAAkBC"}
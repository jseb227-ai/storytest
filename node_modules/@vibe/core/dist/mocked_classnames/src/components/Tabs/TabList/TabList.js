import{slicedToArray as e,defineProperty as r}from"../../../../_virtual/_rollupPluginBabelHelpers.js";import t from"classnames";import{camelCase as n}from"es-toolkit";import o,{forwardRef as i,useRef as s,useState as a,useEffect as l,useMemo as d,useCallback as c}from"react";import u from"../../../hooks/useGridKeyboardNavigation/useGridKeyboardNavigation.js";import m from"../../../hooks/useMergeRef.js";import f from"../../../hooks/usePrevious/index.js";import{NOOP as p}from"../../../utils/function-utils.js";import{getTestId as v,ComponentDefaultTestId as b}from"../../../tests/testIds.js";import{getStyle as h}from"../../../helpers/typesciptCssModulesHelper.js";import I from"./TabList.module.scss.js";var C=i((function(i,C){var g=i.className,N=i.id,T=i.onTabChange,j=void 0===T?p:T,y=i.activeTabId,k=void 0===y?0:y,L=i.tabType,x=void 0===L?"Compact":L,A=i.size,E=i.stretchedUnderline,P=void 0!==E&&E,B=i.tabPanelIds,S=void 0===B?[]:B,U=i.children,_=i["data-testid"],G=s(null),H=m(C,G),K=s({}),M=a(k),O=e(M,2),W=O[0],w=O[1],z=f(k),R=f(W);l((function(){k!==z&&k!==W&&w(k)}),[k,z,W,w]),l((function(){var e;void 0!==R&&R!==W&&K.current[W]&&(null===(e=K.current[W])||void 0===e||e.focus())}),[W,R]);var q=d((function(){var e=new Set;return o.Children.forEach(U,(function(r,t){r.props.disabled&&e.add(t)})),e}),[U]),D=c((function(e){q.has(e)||(w(e),j&&j(e))}),[j,q]),F=c((function(e,r){var t,n=null===(t=U[r].props)||void 0===t?void 0:t.onClick;q.has(r)||(n&&n(r),D(r))}),[U,q,D]),J=c((function(e){return U[e]}),[U]),Q=d((function(){return Array.from(q)}),[q]),V=s(),X=u({ref:V,numberOfItemsInLine:null==U?void 0:U.length,itemsCount:null==U?void 0:U.length,getItemByIndex:J,onItemClicked:F,disabledIndexes:Q,circularNavigation:!0}),Y=X.activeIndex,Z=X.onSelectionAction,$=f(Y);l((function(){var e;void 0!==Y&&Y>=0&&$!==Y&&K.current[Y]&&(null===(e=K.current[Y])||void 0===e||e.focus())}),[Y,$]);var ee=d((function(){return o.Children.map(U,(function(e,r){var n=W===r,i=void 0===Y||0>Y?n:Y===r;return o.cloneElement(e,{value:r,active:n,focus:Y===r,onClick:Z,stretchedUnderline:P,className:t(I.tabListTabWrapper,e.props.className),tabInnerClassName:t(I.tabListTabInner,e.props.tabInnerClassName),tabIndex:i?0:-1,ariaControls:S[r],ref:function(e){K.current[r]=e}})}))}),[U,W,Y,Z,P,S,N]);return o.createElement("div",{ref:H,className:t(I.tabsWrapper,g,[h(I,n(x))],r({},I.stretchedUnderline,P)),id:N,"data-testid":_||v(b.TAB_LIST,N)},o.createElement("ul",{ref:V,className:t(I.tabsList,[h(I,A)]),role:"tablist"},ee))}));Object.assign(C,{isTabList:!0});export{C as default};
//# sourceMappingURL=TabList.js.map

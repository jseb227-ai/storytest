import f,{useMemo,Fragment}from'react';import*as he from'storybook/internal/manager-api';import {addons,experimental_useStatusStore,useStorybookApi}from'storybook/manager-api';import {styled,useTheme}from'storybook/theming';import*as Pe from'storybook/internal/components';var Y=Object.defineProperty;var K=Object.getOwnPropertyDescriptor;var $=Object.getOwnPropertyNames;var j=Object.prototype.hasOwnProperty;var S=(e,t,r,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let a of $(t))!j.call(e,a)&&a!==r&&Y(e,a,{get:()=>t[a],enumerable:!(o=K(t,a))||o.enumerable});return e},c=(e,t,r)=>(S(e,t,"default"),r);var d={};c(d,he);var h="storybook/addon-tag-badges",u=`${h}/tool`,m="tagBadges";var g={};c(g,Pe);function y(e){let[t,...r]=e.split(":");return {prefix:t,suffix:r.join(":")||null}}function O(e){return y(e).prefix}function A(e){return y(e).suffix}function C(e){if(e===void 0)return /.*/;if(typeof e=="string"){let t=e;return t.startsWith("^")||(t=`^${t}`),t.endsWith("$")||(t+="$"),new RegExp(t)}return e}function M(e,t){let r=[t].flat();for(let o of r)if(o instanceof RegExp){if(e.match(o))return  true}else if(typeof o=="string"){if(e===o)return  true}else {let{prefix:a,suffix:s}=y(e),p=C(o.prefix),i=C(o.suffix),n=a.match(p),l=s&&s.match(i);if(n&&l)return  true}return  false}function k(e,t){return e.filter(r=>M(r,t))}var z=styled(g.WithTooltip)`
  line-height: 1px;
`,W=styled.div(({as:e,context:t,extraStyle:r,hasLongText:o,theme:a})=>({display:"inline-block",fontSize:11,lineHeight:".75rem",alignSelf:"center",padding:t==="sidebar"?"3px 8px":"4px 12px",border:"none",cursor:e==="button"?"help":t==="sidebar"?"cursor":"initial",borderRadius:"3em",fontWeight:a.typography.weight.bold,boxShadow:a.base==="light"?`inset 0 0 0 1px ${r.borderColor??`color-mix(in oklab, ${r.color??a.color.dark} 10%, transparent 90%)`}`:`inset 0 0 0 1px ${r.borderColor??"none"}`,backgroundColor:a.color.mediumlight,color:a.color.dark,wordBreak:"normal",width:o?"min-content":"fit-content",flexShrink:0,textWrapStyle:"pretty",textAlign:"center",...r,borderColor:void 0})),G=styled.div(({theme:e})=>({padding:"8px 12px",boxSizing:"border-box",color:e.color.defaultText,lineHeight:"1.125rem"})),X=({context:e,style:t,text:r,tooltip:o})=>{let a=useTheme(),s;if(t==="green"?s={backgroundColor:"hsl(130, 100%, 74%)",borderColor:"hsl(130, 100%, 34%)",color:"hsl(130, 100%, 6%)"}:t==="purple"?s={backgroundColor:"hsl(257, 100%, 84%)",borderColor:"hsl(257, 100%, 64%)",color:"hsl(257, 100%, 12%)"}:t==="blue"?s={backgroundColor:"hsl(194, 100%, 74%)",borderColor:"hsl(194, 100%, 34%)",color:"hsl(194, 100%, 12%)"}:t==="grey"?s={backgroundColor:"hsl(0, 0%, 84%)",borderColor:"hsl(0, 0%, 34%)",color:"hsl(0, 0%, 12%)"}:t==="orange"?s={backgroundColor:"hsl(16, 100%, 74%)",borderColor:"hsl(16, 100%, 34%)",color:"hsl(16, 100%, 12%)"}:t==="red"?s={backgroundColor:"hsl(0, 100%, 44%)",borderColor:"hsl(0, 100%, 64%)",color:"hsl(0, 100%, 94%)"}:t==="yellow"?s={backgroundColor:"hsl(36, 100%, 74%)",borderColor:"hsl(36, 100%, 34%)",color:"hsl(36, 100%, 12%)"}:t==="pink"?s={backgroundColor:"hsl(330, 100%, 74%)",borderColor:"hsl(330, 100%, 34%)",color:"hsl(330, 100%, 12%)"}:t==="turquoise"?s={backgroundColor:"hsl(157, 100%, 74%)",borderColor:"hsl(157, 100%, 34%)",color:"hsl(157, 100%, 12%)"}:typeof t=="object"&&(s={...t}),typeof r!="string")throw new Error("Badge: the text prop must be defined and must be a string.");let p=r.length>15;return f.createElement(Fragment,null,!o||e=="sidebar"?f.createElement(W,{context:e,extraStyle:s??{},hasLongText:p,theme:a},r):f.createElement(z,{closeOnOutsideClick:true,placement:"bottom",tooltip:typeof o=="string"?f.createElement(G,null,o):f.createElement(g.TooltipMessage,{...o})},f.createElement(W,{as:"button",context:e,extraStyle:s??{},hasLongText:p,theme:a},r)))};function J(e,t,r,o){return typeof e=="function"?e({context:o,entry:t,getTagParts:y,getTagPrefix:O,getTagSuffix:A,tag:r}):e}var x=({context:e,config:t,entry:r,tag:o,...a})=>{let s=J(t,r,o,e);return f.createElement(X,{...s,context:e,...a})};var P={mdx:["story","component"],sidebar:[{type:"story",skipInherited:true},{type:"docs",skipInherited:true},{type:"component",skipInherited:false},{type:"group",skipInherited:false}],toolbar:["docs","story"]};function B(e){return Array.isArray(e)?e:[e]}function Q(e){return {mdx:B(e?.mdx??P.mdx),sidebar:B(e?.sidebar??P.sidebar),toolbar:B(e?.toolbar??P.toolbar)}}function _({config:e,context:t,type:r}){if(r==="root")return "never";for(let o of Q(e.display)[t]){if(o===true)return "always";if(o===false)return "never";if(o===r)return "always";if(t==="sidebar"&&typeof o=="object"&&o.type===r)return o.skipInherited?"skip-inherited":"always"}return "never"}function L({api:e,context:t,parameters:r,parent:o,tags:a,type:s}){if(!a||!s)return [];let p,i;return e&&o&&(i=e.resolveStory(o),i&&i.type!=="root"&&(p=i.tags)),(r||[]).map(n=>({...n,displayOutcome:_({context:t,config:n,type:s})})).filter(({displayOutcome:n})=>n!=="never").flatMap(n=>k(a,n.tags).map(l=>({badge:n.badge,displayOutcome:n.displayOutcome,tag:l}))).reduce((n,l)=>(l.displayOutcome==="skip-inherited"&&i&&i.type!=="root"&&p?.includes(l.tag)&&L({api:e,context:t,parameters:r,parent:i.parent,tags:p,type:i.type}).find(({tag:R})=>R===l.tag)||n.every(({tag:E})=>E!==l.tag)&&n.push(l),n),[])}function b({context:e,parameters:t,parent:r,tags:o,type:a}){let s=useStorybookApi();return useMemo(()=>L({api:s,context:e,parameters:t,parent:r,tags:o,type:a}),[e,t,r,o,a])}var re=styled.div`
  content: ' ';
  width: 1px;
  height: 20px;
  background: rgba(255, 255, 255, 0.1);
  margin-left: 2px;
  margin-right: 2px;
  display: inline-block;
`,oe=styled.div`
  display: flex;
  align-items: center;
  gap: 6px;

  &:last-child div:last-child {
    display: none;
  }
`,F=function({api:t}){let{[m]:r}=addons.getConfig(),o=t.getCurrentStoryData(),{tags:a,type:s}=o??{},p=b({context:"toolbar",parameters:r,tags:a,type:s});return p.length?f.createElement(oe,{key:u},p.map(({badge:i,tag:n})=>f.createElement(x,{config:i,context:"toolbar",entry:o,key:n,tag:n})),f.createElement(re,null)):""};var ae={tags:"new",badge:{text:"New",style:"green"}},se={tags:["alpha","beta","rc","experimental"],badge:({tag:e})=>({text:e==="rc"?"Release candidate":(r=>r[0].toUpperCase()+r.slice(1))(e),style:"purple"})},ne={tags:"deprecated",badge:{text:"Deprecated",style:"yellow"}},ie={tags:"outdated",badge:{text:"Outdated",style:"orange"}},pe={tags:"danger",badge:{text:"Danger",style:"red"}},de={tags:["code-only"],badge:{text:"Code Only",style:"grey"}},le={tags:[{prefix:"v"},{prefix:"version"}],badge:({getTagSuffix:e,tag:t})=>{let r=e(t),o=r?.startsWith("0");return {text:`${r}`,style:o?"turquoise":"blue"}}},H=[ae,se,ne,ie,pe,de,le];var fe=styled.div(({hasParentPadding:e,hasStatusWithUI:t})=>`
  display: flex;
  flex: 1;
  justify-content: flex-end;
  flex-wrap: wrap;
  text-wrap-style: balance;
  gap: 4px;
  margin-right: ${t?"6px":e?"28px":"34px"};
}
`),me=styled.div`
  flex: 1;
}
`,U=({children:e,item:t,hasStatusWithUI:r})=>{let{[m]:o}=addons.getConfig();if(t.type!=="component"&&t.type!=="group"&&t.type!=="docs"&&t.type!=="story")return e;let a=b({context:"sidebar",parameters:o,parent:t.parent,tags:t.tags,type:t.type});return f.createElement(fe,{hasParentPadding:t.type==="component"||t.type==="group",hasStatusWithUI:r??false},e,f.createElement(me,null),a.length?f.createElement(x,{config:a[0].badge,context:"sidebar",entry:t,tag:a[0].tag}):"")};function ue(e){return e?!!e["storybook/component-test"]:false}function v(e){if(e.type!=="story"&&e.type!=="group"&&e.type!=="docs"&&e.type!=="component")return;let t=experimental_useStatusStore(r=>r[e.id]);return f.createElement(U,{item:e,hasStatusWithUI:ue(t)},e.name)}d.addons.register(h,e=>{d.addons.add(u,{type:d.types.TOOL,title:"Tag Badges",render:()=>f.createElement(F,{api:e})});});d.addons.setConfig({[m]:H,sidebar:{renderLabel:v}});//# sourceMappingURL=manager.js.map
//# sourceMappingURL=manager.js.map